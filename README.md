# Тестовое задание на _Python_-программиста

В этом репозитории реализовано API приложения для планирования пикников, состоящие из сущностей:
 - Город
 - Пикник
 - Пользователь
 - Регистрация пользователя на пикник

## Задание
 Тестовое задание подразумевает изменение представленного здесь кода для достижения следующих задач:

### Минимальный уровень
  1. Запустить проект и ознакомиться с его документацией на странице `http://127.0.0.1:8000/redoc/`
     или `http://127.0.0.1:8000/docs/` 
     и выполнить каждый из запросов
  2. Изменить код проекта для получения дополнительных возможностей:
     - Добавить поиск городов аргументом `q` в запросе `/get-cities/`
     - Добавить возможность фильтрации пользователей по возрасту(минимальный/максимальный) в запросе `users-list`
     - Поправить ошибку в запросе `picnic-add`
     - Добавить метод регистрации на пикник `picnic-register`
  3. Высказать идеи рефакторинга файла `external_requests.py`
  4. Описать возможные проблемы при масштабировании проекта

#### Ответы
3. Высказать идеи рефакторинга файла `external_requests.py`
- Проблемы `external_requests.py`:
   - слишком много описаний к функциям, нам вовсе необязательно подписывать/документировать перегруженный `__init__`, например;
   - необязательно выделять код в отдельную функцию если он не будет использоваться повторно, некоторые функции можно "слепить";
   - идет повторение методов `get_weather_url` и `send_request` в классах `GetWeatherRequest` и `CheckCityExisting`, также повторно инициализируется сессия `requests`;
- Идеи рефакторинга:
   - оставить описания только у функций (и возможно у класса), которыми будем пользоваться мы;
   - объединить функции `get_weather_url` с `send_request`; `get_weather_from_response` с `get_weather`;
   - объединить два класса в один, так мы можем избавиться от повторения и использовать методы класса в зависимости от потребности;
4. Описать возможные проблемы при масштабировании проекта
- Возможные проблемы при масштабировании:
  - Файл `main.py` станет очень громоздким, так как на данный момент в нем происходит обработка запросов всех сущностей.
  - По тому же поводу, отсутствие стандартизированной архитектуры эндпойнтов по REST приведёт к путанице. Намного интуитивнее создать пользователя с помощью `POST /users/`, нежели подбором названия конкретного эндпоинта (`/register-user/`).
  - В приложении не используются Pydantic модели для всех запросов на вход и выход, что ограничивает возможности приложения для парсинга/валидации данных, а также не предоставляет подробные данные автоматической документации Swagger. Валидацию придётся описывать в методах эндпоинтов, что приведёт к дополнительной громоздкости.
  - Также, рекомендуется использовать параметр `response_model` всех декораторов `@app` для документирования данных, проверки и преобразования с фильтрацией выходных данных в соответствии с объявленным типом.
  - В зависимости от количества сущностей, также можно разбить `models.py` на более модулярную систему описывания Pydantic моделей (например, `CreatePicnicModel` в `models/picnics.py`).
     
### Продвинутый уровень
  1. Привести к нормальному виду:
     - Методы обращения к эндпойнтам
     - Названия эндпойнтов
     - Архитектуру и пути обращения к эндпойнтам
  2. Расписать все входные/выходные поля в документации (`/redoc/` или `/docs/`), описав их классами
  3. Оптимизировать работу с базой данных в запросе `/all-picnics/`
  4. Сменить базу данных с SQLite на PostgreSQL
  5. Отрефакторить файл `external_requests.py`
  6. Написать тесты


### Дополнительные задания
  - Сделать логирование в файл, который не будет очищаться после перезапуска в докере
  - Описать правильную архитектуру для проекта


## Результат выполнения задания
Результат выполнения должен быть выложен в _общедоступном_ репозитории,
 история коммитов должна показывать выполненную работу
_Комментарии в коде тоже приветствуются_